<!DOCTYPE html>

<html>
    <img
        src="Pepe_Shades.jpg"
        width="600"
        height="300"
        style="vertical-align: top"
    />
    <br />
    <head>
        <title>Flex</title>
        <link rel="stylesheet" href="./funding.css" />
    </head>

    <body>
        <header>
            <nav>
                <ul>
                    <li>
                        <a> Funding </a>
                    </li>
                    <li>
                        <a href="bet.html"> Bet </a>
                    </li>
                    <li>
                        <a href="dashboard.html"> Dashboard </a>
                    </li>
                </ul>
            </nav>
            <button
                id="connectButton"
                type="button"
                style="position: absolute; right: 0"
            >
                Connect Metamask
            </button>
        </header>
        <br />
        Deposit funds to Flex
        <br />
        <table>
            <thread>
                <tr>
                    <th>Token</th>
                    <th>Available Balance</th>
                    <th>Escrowed Balance</th>
                </tr>
            </thread>
            <tbody id="data-output">
                <script>
                    fetch("tokenList.json")
                        .then(function (response) {
                            return response.json()
                        })
                        .then(async function (tokens) {
                            let placeholder =
                                document.querySelector("#data-output")
                            let out = ""
                            for (let token of tokens) {
                                out += `
                    <tr>
                        <td style="vertical-align:middle"><img src=${token.img} width="25" height="25" ></img>  ${token.ticker}</td>
                        <td id="availableBalance${token.ticker}">Connect Wallet</td>
                        <td id="escrowedBalance${token.ticker}">Connect Wallet</td>
                    </tr>
                    `
                            }
                            placeholder.innerHTML = out
                        })
                </script>
            </tbody>
        </table>

        <section class="modal hidden">
            <div class="flex">
                <button class="btn-close">â¨‰</button>
            </div>
            <div>
                <h3>Deposit to Flex</h3>

                <select name="tokens" id="tokens">
                    <script>
                        fetch("tokenList.json")
                            .then(function (response) {
                                return response.json()
                            })
                            .then(async function (tokens) {
                                let placeholder =
                                    document.querySelector("#tokens")
                                let out = ""
                                for (let token of tokens) {
                                    out += `
                                <option value="${token.address}">${token.ticker}</option>"
                                `
                                }
                                placeholder.innerHTML = out
                            })
                    </script>
                </select>
                <input type="amount" id="depositAmount" placeholder="0" />
            </div>

            <button class="btn" id="tokenDepositButton">Deposit</button>
        </section>

        <div class="overlay hidden"></div>
        <button class=".btn-open" id="depositButton">Fund</button>
        <button type="button" id="withdrawButton">Withdraw</button>

        <br /><br />
        <br /><strong>Withdraw Tokens</strong><br />
        <label for="withdrawPrompt">Withdraw Amount</label>
        <input id="withdrawAmount" placeholder="0.1" type="number" />
        <label for="withdrawAddressPrompt">Token Address</label>
        <input id="withdrawTokenAddress" placeholder="0x..." />
        <button type="button" id="tokenWithdrawalButton">Withdraw</button>
    </body>
    <script src="./funding.js" type="module"></script>
</html>
